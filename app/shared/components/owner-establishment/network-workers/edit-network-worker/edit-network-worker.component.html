<form class="c-dialog c-dialog--small c-dialog--autoHeight" [formGroup]="form" (ngSubmit)="editWorker()">
  <div class="c-dialog__header">
    <p class="c-dialog__title">{{'–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞' | translate}}</p>
    <button class="c-dialog__close" type="button" (click)="closeDialog()">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <div class="c-dialog__body c-dialog__body--center c-dialog__body--padding">
    <mat-form-field>
      <mat-label>{{'–í–≤–µ–¥—ñ—Ç—å —ñ–º\'—è –ü—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞' | translate}}</mat-label>
      <label>
        <input type="text" formControlName="name" [value]="worker.name" matInput required>
      </label>
      <mat-error *ngIf="form.get('name').hasError('required')">
        {{'–Ü–º\'—è —î –æ–±–æ–≤\'—è–∑–∫–æ–≤–∏–º' | translate}}
      </mat-error>
    </mat-form-field>
    <mat-form-field>
      <mat-label>{{'–í–≤–µ–¥—ñ—Ç—å email –ü—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞' | translate}}</mat-label>
      <label>
        <input type="text" formControlName="email" [value]="worker.email" matInput required>
      </label>
      <mat-error *ngIf="form.get('email').hasError('required')">
        {{'Email —î –æ–±–æ–≤\'—è–∑–∫–æ–≤–∏–º' | translate}}
      </mat-error>
      <mat-error *ngIf="form.get('email').hasError('email')">
        {{'–í–≤–µ–¥—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π email' | translate}}
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{'–ó–∞–∫–ª–∞–¥ –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∞' | translate}}</mat-label>
      <mat-select
        disableOptionCentering
        formControlName="shop"
        role="listbox"
        required>
        <mat-option>
          <ngx-mat-select-search
            [(ngModel)]="searchEstablishmentValue"
            formControlName="establishmentSearch"
            [placeholderLabel]="'–ó–Ω–∞–π—Ç–∏ –º—ñ—Å—Ç–æ' | translate"
            noEntriesFoundLabel="{{'–¢–∞–∫–æ–≥–æ –º—ñ—Å—Ç–∞ –Ω–µ–º–∞—î' | translate}} üòû"
            [ariaLabel]="'–ó–Ω–∞–π—Ç–∏ –º—ñ—Å—Ç–æ' | translate"></ngx-mat-select-search>
        </mat-option>
        <span *ngFor="let area of establishments">
            <mat-optgroup *ngFor="let region of area.regions | searchEstablishments:searchEstablishmentValue;"
                          [label]="region.name_en | getLocalizationCityKey | translate">
              <mat-option *ngFor="let coffeeShop of region.coffee_shops" [value]="coffeeShop.id" role="listitem">
                {{coffeeShop.address}}
              </mat-option>
            </mat-optgroup>
          </span>
        <mat-option *ngIf="error">{{error | translate}}</mat-option>
        <mat-option
          *ngIf="!establishments?.length && !error">{{'–°–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ –∑–∞–∫–ª–∞–¥.' | translate}}</mat-option>
      </mat-select>
      <mat-error *ngIf="form.get('shop').hasError('required')">
        {{'–ó–∞–∫–ª–∞–¥ —î –æ–±–æ–≤\'—è–∑–∫–æ–≤–∏–º' | translate}}
      </mat-error>
    </mat-form-field>

    <mat-error *ngIf="error" class="mat-error">{{error | translate}}</mat-error>
  </div>
  <div class="c-dialog__footer">
    <div class="c-dialog__footerBtns">
      <button class="o-button o-button--secondary" type="submit"
              [disabled]="!editingSub.closed || !form.dirty" matRipple>
        <ng-container *ngIf="editingSub.closed; else addingLoading">
          <span class="o-buttonText">{{'–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏' | translate}}</span>
        </ng-container>
        <ng-template #addingLoading>
          <spinner class="o-buttonSpinner o-buttonSpinner--white"></spinner>
        </ng-template>
      </button>
    </div>
  </div>
</form>
