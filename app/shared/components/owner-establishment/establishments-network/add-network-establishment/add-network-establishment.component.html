<form class="c-dialog c-dialog--small c-dialog--autoHeight c-dialog--showToTop" [formGroup]="form"
      (ngSubmit)="addEstablishment()">
  <div class="c-dialog__header">
    <p class="c-dialog__title">{{'–î–æ–¥–∞–≤–∞–Ω–Ω—è –∫–∞–≤\'—è—Ä–Ω—ñ' | translate}}</p>
    <button class="c-dialog__close" type="button" (click)="closeDialog()">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <div class="c-dialog__body c-dialog__body--center c-dialog__body--padding">
    <p class="c-dialog__text c-dialog__text--small">
      {{'–Ø–∫—â–æ —É –≤–∞—Å —î –∫—ñ–ª—å–∫–∞ –∑–∞–∫–ª–∞–¥—ñ–≤, –≤–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ —ó—Ö —Ç—É—Ç.' | translate}}
    </p>

    <image-preview [url]="''" [title]="'–í–∫–∞–∂—ñ—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–∫–ª–∞–¥—É' | translate" [formControlInput]="form.controls['img']"></image-preview>
    <mat-form-field>
      <mat-label>{{'–í–≤–µ–¥—ñ—Ç—å –∞–¥—Ä–µ—Å—É –∑–∞–∫–ª–∞–¥—É' | translate}}</mat-label>
      <label>
        <input class="" type="text" formControlName="address" matInput [placeholder]="'–í—É–ª. –∞–±–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ Google Maps' | translate" required>
      </label>
      <mat-error *ngIf="form.get('address').hasError('required')">
        {{'–ê–¥—Ä–µ—Å–∞ —î –æ–±–æ–≤\'—è–∑–∫–æ–≤–∞' | translate}}
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{'–í–∫–∞–∂—ñ—Ç—å –º—ñ—Å—Ç–æ –∑–∞–∫–ª–∞–¥—É' | translate}}</mat-label>
      <mat-select
        [compareWith]="compareObjects"
        disableOptionCentering
        formControlName="region"
        role="listbox"
        [disabled]="!getCitiesSub.closed"
        required>
        <mat-option>
          <ngx-mat-select-search
            [formControl]="areaFilterCtrl"
            [placeholderLabel]="'–ó–Ω–∞–π—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–µ –º—ñ—Å—Ç–æ' | translate"
            noEntriesFoundLabel="{{'–¢–∞–∫–æ–≥–æ –º—ñ—Å—Ç–∞ –Ω–µ–º–∞—î' | translate}} üòû"
            [ariaLabel]="'–ó–Ω–∞–π—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–µ –º—ñ—Å—Ç–æ' | translate"></ngx-mat-select-search>
        </mat-option>
        <mat-optgroup *ngFor="let area of filteredArea | async"
                      [label]="area.name_en | getLocalizationCityKey | translate">
          <mat-option *ngFor="let region of area.regions" [value]="region" role="listitem">
            {{region.name_en | getLocalizationCityKey | translate}}
          </mat-option>
        </mat-optgroup>
      </mat-select>
      <mat-error *ngIf="form.get('region').hasError('required')">
        {{'–ú—ñ—Å—Ç–æ —î –æ–±–æ–≤\'—è–∑–∫–æ–≤–∏–º' | translate}}
      </mat-error>
    </mat-form-field>

    <mat-error *ngIf="error" class="mat-error">{{error | translate}}</mat-error>
  </div>
  <div class="c-dialog__footer">
    <div class="c-dialog__footerBtns">
      <button class="o-button o-button--secondary" type="submit" [disabled]="!addingSub.closed" matRipple>
        <ng-container *ngIf="addingSub.closed; else addingLoading">
          <span class="o-buttonText">{{'–î–æ–¥–∞—Ç–∏ –∑–∞–∫–ª–∞–¥' | translate}}</span>
        </ng-container>
        <ng-template #addingLoading>
          <spinner class="o-buttonSpinner o-buttonSpinner--white"></spinner>
        </ng-template>
      </button>
    </div>
  </div>
</form>
