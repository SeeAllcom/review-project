<div class="c-cards__header">
  <div class="container">
    <div class="c-cards__headerContent">
      <span class="c-cards__back" (click)="goBack()">
        <mat-icon>arrow_back</mat-icon>
      </span>
      <div class="c-cards__description">
        <h1 class="c-cards__title">{{'–ó–∞–∫–ª–∞–¥–∏ –¥–µ –≤–∏ –∫—É–ø–∏–ª–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç' | translate}}</h1>
        <h2 class="c-cards__subTitle">{{'–í–∏–±–µ—Ä—ñ—Ç—å –∑–∞–∫–ª–∞–¥ –≤ —è–∫–æ–º—É —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç' | translate}}</h2>
      </div>
    </div>
  </div>
</div>
<div class="c-cards">
  <div class="container">
    <ng-container *ngIf="getEstablishmentsSub.closed; else loading">
      <ng-container *ngIf="!error; else isErrorTemplate">
        <ng-container *ngIf="establishments.length; else empty">
          <ul class="c-cardsList">
            <li class="c-cardsList__item" *ngFor="let establishment of establishments"
                (click)="openEstablishmentAbonements(establishment.slug)" addVisitedClass>
              <span class="c-cardsList__itemBadge">{{'–ê–±–æ–Ω–µ–º–µ–Ω—Ç–∏' | translate}}</span>
              <span class="c-cardsList__itemDisclose">
              <span class="c-cardsList__itemDiscloseBtn">
                <img src="/assets/img/icons/icon-more-disclose.svg" alt="">
              </span>
            </span>
              <img defaultImage="/assets/img/img-not-loaded.svg" [lazyLoad]="API_URL + establishment.avatar" [alt]="establishment.name"
                   class="c-cardsList__img">
              <h3 class="c-cardsList__title">{{establishment.name}}</h3>
            </li>
          </ul>
        </ng-container>
        <ng-template #empty>
          <div class="c-cards__empty">
            <p class="c-cards__emptyTitle">
              {{'–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î –Ω—ñ—è–∫–∏—Ö –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ñ–≤.' | translate}} üòß
            </p>
            <p class="c-cards__emptyText">
              {{'–í–∏–±–µ—Ä—ñ—Ç—å –º—ñ—Å—Ç–æ —ñ –∑–∞–∫–ª–∞–¥ –≤ –Ω—å–æ–º—É –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –ø—Ä–∏–¥–±–∞—Ç–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç.' | translate}}
            </p>
            <button *ngIf="!(isCurrentCity$ | async)" class="o-button o-button--secondary" (click)="openCitiesSelector()">{{'–í–∏–±—Ä–∞—Ç–∏ –º—ñ—Å—Ç–æ'}}</button>
            <a *ngIf="(isCurrentCity$ | async)" [routerLink]="'/' +  (isCurrentCity$ | async).name_en + '/purchase-establishments'" class="o-button o-button--secondary">
              {{'–ö—É–ø–∏—Ç–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç –≤ '}}{{(isCurrentCity$ | async).name_en | getLocalizationCityKey | translate }}
            </a>
          </div>
        </ng-template>
      </ng-container>
      <ng-template #isErrorTemplate>
        <div class="c-cards__empty">
          <p class="c-cards__emptyText c-cards__emptyText--error">{{error | translate}}</p>
        </div>
      </ng-template>
    </ng-container>
    <ng-template #loading>
      <spinner class="c-cards__spinner"></spinner>
    </ng-template>
  </div>
</div>
