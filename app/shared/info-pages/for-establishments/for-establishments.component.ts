import { Component, Inject, OnInit, PLATFORM_ID } from '@angular/core';
import { MatDialog } from '@angular/material/dialog';
import { ApplicationRegistrationDialogComponent } from './application-registration-dialog/application-registration-dialog.component';
import { isPlatformBrowser } from '@angular/common';
import { LanguageDialogComponent } from '../../components/language-dialog/language-dialog.component';
import { take } from 'rxjs/operators';
import { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';
import { FLAGS_SPRITE } from '../../helpers/variables.helper';
import { LANGUAGES } from '../../helpers/translate.helper';
import { LanguageService } from '../../services/language.service';
import { FormControl, FormGroup, Validators } from '@angular/forms';
import { marker } from '@biesbjerg/ngx-translate-extract-marker';
import { Meta, Title } from '@angular/platform-browser';
import { TranslateService } from '@ngx-translate/core';
import { Subscription } from 'rxjs';
import { getBackendMessage } from '../../helpers/errors.helper';
import { LandingFormType, LandingService } from '../services/landing.service';
import { NotifierService } from 'angular-notifier';
import { environment } from '../../../../environments/environment';
import { SeoPageName } from '../../seo/models/page-name.enum';
import { PageMetaService } from '../../seo/graph-cms/page-meta/page-meta.service';
import { SwiperConfigInterface } from 'ngx-swiper-wrapper';
import { trimLongText } from '../../helpers/helpers';

interface PostInterface {
  showFullDescription: boolean;
  imgUrl: string;
  title: string;
  description: string;
}

@UntilDestroy()
@Component({
  selector: 'for-establishments',
  templateUrl: './for-establishments.component.html',
  styleUrls: ['./for-establishments.component.scss'],
})
export class ForEstablishmentsComponent implements OnInit {
  error: string = '';
  sendMailSub = Subscription.EMPTY;
  flagsSpriteName = FLAGS_SPRITE;
  languages = LANGUAGES;
  flagIconName: string = '';
  form: FormGroup = new FormGroup({
    name: new FormControl('', [Validators.required]),
    email: new FormControl('', [Validators.required, Validators.email]),
    phone: new FormControl('', [Validators.required]),
    coffeeshop_name: new FormControl('', [Validators.required]),
    comment: new FormControl('', [Validators.required]),
    typeForm: new FormControl(LandingFormType.mainCafe),
  });
  swiperConfig: SwiperConfigInterface = {
    init: true,
    centeredSlides: true,
    simulateTouch: true,
    allowTouchMove: true,
    slideToClickedSlide: true,
    autoplay: {
      delay: 15000,
    },
    pagination: {
      el: '.c-forEstablishmentsSwiper__pagination',
      type: 'fraction',
    },
    breakpoints: {
      0: {
        slidesPerView: 1,
        spaceBetween: 0,
      },
      767: {
        slidesPerView: 2,
        spaceBetween: 50,
      },
    },
  };
  slides: PostInterface[] = [
    {
      showFullDescription: false,
      imgUrl: '/assets/img/landings/establishment-registration/posts/post-1.jpeg',
      title: marker('–ü–∏—Ç–∏ –∫–∞–≤—É —Ç–µ–ø–µ—Ä, –∑—Ä—É—á–Ω—ñ—à–µ —Ç–∞ –¥–µ—à–µ–≤—à–µ, —Ä–∞–∑–æ–º –∑ CoffeePhone ‚ù§Ô∏è'),
      description: marker(
        '–°–µ—Ä–≤—ñ—Å CoffeePhone –¥–æ–∑–≤–æ–ª—è—î –≤–∞—à–∏–º –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á–∞–º —Ä–æ–±–∏—Ç–∏ –∑—Ä—É—á–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —É –≤–∞—à–∏—Ö –∑–∞–∫–ª–∞–¥–∞—Ö —Ç–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ ' +
        ' –±–æ–Ω—É—Å–∏. –ö–æ–∂–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –¥–æ—Ä—ñ–≤–Ω—é—î –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—Ö –º–æ–∂–Ω–∞ –≤ –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ ' +
        '–º–æ–∂—É—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤–∞—à—ñ –∑–∞–∫–ª–∞–¥–∏ –Ω–∞ –∫–∞—Ä—Ç—ñ —Ç–∞ –ø—Ä–æ–∫–ª–∞–¥–∞—Ç–∏ –¥–æ –Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç. –ú–æ–∂—É—Ç—å –¥–∞—Ä—É–≤–∞—Ç–∏ –ø—Ä–∏–¥–±–∞–Ω—ñ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∏ ' +
        '—Å–≤–æ—ó–º –¥—Ä—É–∑—è–º —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±–∞–≥–∞—Ç–æ —ñ–Ω—à–∏—Ö –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π.'),
    },
    {
      showFullDescription: false,
      imgUrl: '/assets/img/landings/establishment-registration/posts/post-2.jpeg',
      title: marker('–°—Ç–≤–æ—Ä—ñ—Ç—å –±–µ–∑–ø–µ—á–Ω–µ QR-–º–µ–Ω—é –¥–ª—è –≤–∞—à–æ—ó –∫–∞–≤‚Äò—è—Ä–Ω—ñ üì±'),
      description: marker(
        '–û—Ç—Ä–∏–º–∞–π—Ç–µ –±–µ–∑–ø–µ—á–Ω–µ, —Å—Ç–∏–ª—å–Ω–µ –º–µ–Ω—é –¥–ª—è –∫–∞–≤‚Äò—è—Ä–Ω—ñ, —è–∫–µ –Ω–∞ 30% —Å–∫–æ—Ä–æ—á—É—î –≤–∏—Ç—Ä–∞—Ç–∏ —ñ –Ω–∞ 20-40% –ø—ñ–¥–≤–∏—â—É—î –ø—Ä–æ–¥–∞–∂—ñ. ' +
        '–ó —è–∫–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ —Å—Ç–∏–∫–∞—é—Ç—å—Å—è –≤–ª–∞—Å–Ω–∏–∫–∏ –∫–∞–≤‚Äò—è—Ä–µ–Ω—å –∑—ñ —Å—Ç–æ–ª–∏–∫–∞–º–∏? ' +
        '‚Ä¢ –ù–µ —è–∫—ñ—Å–Ω–µ –ø–¥—Ñ –º–µ–Ω—é –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –π–æ–≥–æ. –ó–∞–Ω–∞–¥—Ç–æ –¥—Ä—ñ–±–Ω–∏–π —à—Ä–∏—Ñ—Ç –Ω–∞ –µ–∫—Ä–∞–Ω—ñ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞, –Ω–µ –∑—Ä—É—á–Ω–æ –≤–∏–±–∏—Ä–∞—Ç–∏ ' +
        '–ø—Ä–æ–¥—É–∫—Ü—ñ—é: –∫–ª—ñ—î–Ω—Ç–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –Ω–µ–∑–∞–¥–æ–≤–æ–ª–µ–Ω–∏–º–∏, –ø—Ä–æ–¥–∞–∂—ñ —Ç–∞ —Å–µ—Ä–µ–¥–Ω—ñ–π —á–µ–∫ –ø–∞–¥–∞—é—Ç—å. ' +
        '‚Ä¢ –ú–µ–Ω—é –≤ –¥—Ä—É–∫–æ–≤–∞–Ω–æ–º—É –≤–∏–≥–ª—è–¥—ñ - –≤–µ–ª–∏–∫—ñ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ —Ä–∏–∑–∏–∫–∏ —è–∫ –¥–ª—è –≤–∞—à–æ—ó –∫–æ–º–∞–Ω–¥–∏, —Ç–∞–∫ —ñ –¥–ª—è –≥–æ—Å—Ç–µ–π. ' +
        '–í–∏ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –±–µ–∑–ø–µ–∫—É –¥–ª—è –≥–æ—Å—Ç–µ–π —ñ –ø–æ—á–Ω–µ—Ç–µ –∑–∞—Ä–æ–±–ª—è—Ç–∏ –±—ñ–ª—å—à–µ: –∫—Ä–∞—â–µ –ø—Ä–æ–¥–∞—î –∑–∞ —Ä–∞—Ö—É–Ω–æ–∫ —Ñ–æ—Ç–æ, ' +
        '—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤—É —Ç–∞ –±–µ–∑–∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ—ó –æ–ø–ª–∞—Ç–∏, —Ç–∞–∫–æ–∂ –ø–æ–∫—É–ø—Ü—ñ –æ—Ç—Ä–∏–º—É—é—Ç—å –±–æ–Ω—É—Å–∏ –∑–∞ –∫–æ–∂–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è. –í–∏—â–µ –ª–æ—è–ª—å–Ω—ñ—Å—Ç—å ' +
        '–∫–ª—ñ—î–Ω—Ç—ñ–≤, –º–µ–Ω—à–µ –≤–∏—Ç—Ä–∞—Ç –Ω–∞ –º–µ–Ω—é —ñ –ø–µ—Ä—Å–æ–Ω–∞–ª.' +
        '- QR-–º–µ–Ω—é —Å–ø—Ä–æ—â—É—î —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —ñ –∑–Ω–∏–∂—É—î –≤–∏—Ç—Ä–∞—Ç–∏\n' +
        '- –ù–∞ 20-40% –∑—Ä–æ—Å—Ç–∞—î –ø—Ä–æ–¥–∞–∂ —ñ —Å–µ—Ä–µ–¥–Ω—ñ–π —á–µ–∫\n' +
        '- –ù–µ –≤–∏—Ç—Ä–∞—á–∞—î—Ç–µ –≥—Ä–æ—à—ñ –Ω–∞ —Ä–æ–∑—Ä–æ–±–∫—É –≤–ª–∞—Å–Ω–æ–≥–æ —Å–∞–π—Ç—É\n' +
        '- –ì–æ—Å—Ç—è–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫ - –≤–æ–Ω–∏ –∑–∞–¥–æ–≤–æ–ª–µ–Ω—ñ. ' +
        '–ü—ñ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—è –¥–æ CoffeePhone –∑–∞—Ä–∞–∑ —ñ –æ—Ç—Ä–∏–º—É–π—Ç–µ –≥–æ—Ç–æ–≤—É —Å—Ç–æ—Ä—ñ–Ω–∫—É —á–µ—Ä–µ–∑ 48 –≥–æ–¥–∏–Ω.'),
    },
    {
      showFullDescription: false,
      imgUrl: '/assets/img/landings/establishment-registration/posts/post-3.jpeg',
      title: marker('–í—ñ–¥–≤—ñ–¥—É–≤–∞—á—ñ –Ω–µ –º–æ–∂—É—Ç—å –≤–∞—Å –∑–Ω–∞–π—Ç–∏? –ù–µ –ø—Ä–æ–±–ª–µ–º–∞. ‚ò∫Ô∏è'),
      description: marker(
        '–î–æ–¥–∞–π—Ç–µ –ª–æ–∫–∞—Ü—ñ—ó —Å–≤–æ—ó—Ö –∑–∞–∫–ª–∞–¥—ñ–≤ –Ω–∞ –∫–∞—Ä—Ç—ñ. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑–º–æ–∂—É—Ç—å –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–∫–∞—Ü—ñ—ó –≤–∞—à–∏—Ö –∑–∞–∫–ª–∞–¥—ñ–≤ —Ç–∞ ' +
        '–ø—Ä–æ–∫–ª–∞—Å—Ç–∏ –¥–æ –Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç –Ω–∞ –∫–∞—Ä—Ç—ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–µ—Ä–≤—ñ—Å—É CoffeePhone. –°–∫–ª–∞—Å—Ç–∏ —Å–≤–æ—î –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø–æ –¥–æ—Ä–æ–∑—ñ –¥–æ' +
        ' –Ω—å–æ–≥–æ, –ø—Ä–æ–≤–µ—Å—Ç–∏ –±–µ–∑–∫–æ–Ω—Ç–∞–∫—Ç–Ω—É –æ–ø–ª–∞—Ç—É —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞ –∫–æ–∂–Ω–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –±–æ–Ω—É—Å–∏. –ù–µ–≤–∂–µ —Å–∞–º–µ —Ü—å–æ–≥–æ —Ö–æ—á–µ –∫–æ–∂–µ–Ω' +
        ' –≤–∞—à –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á? –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ –æ–∑–¥–æ–±–ª–µ–Ω–Ω—è –∑–∞–∫–ª–∞–¥—ñ–≤, –≤–∏–±–µ—Ä—ñ—Ç—å —è–∫–∏–π —Å–ø–æ–¥–æ–±–∞–≤—Å—è ' +
        '—ñ –ø—Ä–æ–∫–ª–∞–¥—ñ—Ç—å –º–∞—Ä—à—Ä—É—Ç –¥–æ –Ω—å–æ–≥–æ –Ω–∞ –∫–∞—Ä—Ç—ñ.'),
    },
    {
      showFullDescription: false,
      imgUrl: '/assets/img/landings/establishment-registration/posts/post-4.jpeg',
      title: marker('–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –±–æ–Ω—É—Å–Ω—É –ø—Ä–æ–≥—Ä–∞–º—É üòã'),
      description: marker(
        '–ö–∞–≤\'—è—Ä–Ω—ñ, –≤ —è–∫–∏—Ö —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –±–æ–Ω—É—Å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –ø–æ–∫—É–ø—Ü—ñ–≤, –≤—ñ–¥—á—É–≤–∞—é—Ç—å –∑–Ω–∞—á–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–¥–∞–∂—ñ–≤.' +
        ' 80% –≤—ñ–¥—Å–æ—Ç–∫—ñ–≤ –∫–ª—ñ—î–Ω—Ç—ñ–≤ —Å—Ç–≤–µ—Ä–¥–∂—É—é—Ç—å, —â–æ –≤–æ–Ω–∏ —á–∞—Å—Ç—ñ—à–µ –∫—É–ø—É—é—Ç—å —É –∫–æ–º–ø–∞–Ω—ñ—ó, —è–∫–∞ –ø—Ä–æ–ø–æ–Ω—É—î –±–æ–Ω—É—Å–∏ –¥–ª—è —Å–≤–æ—ó—Ö' +
        ' –ø–æ—Å—Ç—ñ–π–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤. –ö—Ä—ñ–º —Ç–æ–≥–æ, 55% –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á—ñ–≤ —Å—Ç–≤–µ—Ä–¥–∂—É—é—Ç—å, —â–æ –ø–æ–¥—ñ–ª—è—Ç—å—Å—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ —Ç–∞–∫—É –∫–æ–º–ø–∞–Ω—ñ—é' +
        ' –∑—ñ —Å–≤–æ—ó–º–∏ –¥—Ä—É–∑—è–º–∏. –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ Coffeephone —Ü–µ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–æ–∫, —è–∫–∏–π –Ω–∞–¥–∞—î –≤–ª–∞—Å–Ω–∏–∫–∞–º –∫–∞–≤‚Äô—è—Ä–µ–Ω—å –Ω–∞–±–∞–≥–∞—Ç–æ' +
        ' –±—ñ–ª—å—à–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó, –Ω—ñ–∂ —Ñ—ñ–∑–∏—á–Ω—ñ –∫–∞—Ä—Ç–∏, –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ñ –∞–±–æ –ø–∞–ø–µ—Ä–æ–≤—ñ –Ω–æ—Å—ñ—ó. –í—ñ–¥–æ–º–æ—Å—Ç—ñ –ø—Ä–æ —Ç–µ, —è–∫ —á–∞—Å—Ç–æ –ø–µ–≤–Ω–∏–π' +
        ' –∫–ª—ñ—î–Ω—Ç –∑–¥—ñ–π—Å–Ω—é—î –ø–æ–∫—É–ø–∫–∏, —Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –∑–∞–∑–≤–∏—á–∞–π –≤–∏—Ç—Ä–∞—á–∞—é—Ç—å —ñ —è–∫—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ –≤–æ–Ω–∏ –≤–≤–∞–∂–∞—é—Ç—å –∫—Ä–∞—â–∏–º–∏,' +
        ' –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—è–º –∫–∞–≤–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó —ñ –Ω–∞–¥–∞–≤–∞—Ç–∏ –±—ñ–ª—å—à —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ –ø–æ—Å–ª—É–≥–∏.' +
        ' –ü—Ä–æ–≥—Ä–∞–º–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç—ñ, –ø–æ–±—É–¥–æ–≤–∞–Ω—ñ —Ç–∞–∫—ñ–π –æ—Å–Ω–æ–≤—ñ, —â–æ–± –∑–±—ñ–ª—å—à—É–≤–∞—Ç–∏ –¥–æ—Ö–æ–¥–∏ –≤—ñ–¥ –∫–æ–∂–Ω–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞,' +
        ' –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –¥–∞—é—Ç—å –ø–æ–∫—É–ø—Ü—è–º –±—ñ–ª—å—à–µ –º–æ—Ç–∏–≤–∞—Ü—ñ—ó –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —Å–≤–æ—ó—Ö —É–ª—é–±–ª–µ–Ω–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤.'),
    },
    {
      showFullDescription: false,
      imgUrl: '/assets/img/landings/establishment-registration/posts/post-6.jpeg',
      title: marker('–û—Ç—Ä–∏–º–∞–π—Ç–µ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏–π –∑–≤—ñ—Ç –≤–∞—à–æ–≥–æ –±—ñ–∑–Ω–µ—Å—É. üöÄ'),
      description: marker('–ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ –ø—Ä–æ–¥–∞–∂—ñ–≤ –¥–æ–ø–æ–º–∞–≥–∞—î –∑—Ä–æ–∑—É–º—ñ—Ç–∏, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –≤–∏–≥—ñ–¥–Ω–∏–º' +
        ' —î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É.\n' +
        '\n' +
        '–£ –∑–≤—ñ—Ç—ñ Coffeephone | Business –º–æ–∂–Ω–∞ –≤—ñ–¥—Å–ª—ñ–¥–∫—É–≤–∞—Ç–∏, —è–∫—ñ —Ç–æ–≤–∞—Ä–∏ –ø—Ä–æ–¥–∞—é—Ç—å—Å—è –Ω–∞–π–±—ñ–ª—å—à–µ, –≤ —è–∫–∏—Ö –∑–∞–∫–ª–∞–¥–∞—Ö ' +
        '–Ω–∞–π–±—ñ–ª—å—à–µ –≤–∏–¥–∞–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤, —Å–∫—ñ–ª—å–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤ –ø—Ä–∏–¥–±–∞–ª–∏ —è–∫ –∞–±–æ–Ω–µ–º–µ–Ω—Ç —ñ —Å–∫—ñ–ª—å–∫–∏ —Ç–∞–∫–∏—Ö –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ñ–≤ –±—É–ª–æ —Å–ø–∏—Å–∞–Ω–æ.\n' +
        '\n' +
        '–û—Ç—Ä–∏–º—É–π—Ç–µ –∑–≤—ñ—Ç –∑–∞ –±—É–¥—å-—è–∫–∏–π –¥–µ–Ω—å, –∑—Ä—ñ–≤–Ω—é–π—Ç–µ –≤–∞—à—ñ –ø—Ä–∏–±—É—Ç–∫–∏.\n' +
        '\n' +
        '–©–æ –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ:\n' +
        '- –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö: –≤–∏ —à–≤–∏–¥–∫–æ —Ç–∞ –ª–µ–≥–∫–æ –ø–æ–±–∞—á–∏—Ç–µ, —è–∫ —Ä–æ–∑–≤–∏–≤–∞—î—Ç—å—Å—è –≤–∞—à –±—ñ–∑–Ω–µ—Å.\n' +
        '- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ø—ñ–¥—ñ–±—Ä–∞–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç: –∑ –ø–µ—Ä—à–æ–≥–æ –ø–æ–≥–ª—è–¥—É –≤—ñ–¥–æ–º–æ, —â–æ –π–¥–µ—Ç—å—Å—è —É –¥—ñ–∞–≥—Ä–∞–º–∞—Ö —ñ —è–∫—ñ –¥–∞–Ω—ñ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ñ.\n' +
        '- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–±–∏—Ä–∞—Ç–∏ –ø–µ–≤–Ω—ñ –¥–∞—Ç–∏.\n' +
        '- –î–æ–∑–≤–æ–ª—è—î –ø–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –≤–∏–±—Ä–∞–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º –ø–µ—Ä—ñ–æ–¥–æ–º, —â–æ–± –æ—Ü—ñ–Ω—é–≤–∞—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∑–∞–∫–ª–∞–¥—ñ–≤.\n' +
        '- –î–æ–∑–≤–æ–ª—è—î –∑ –ø–æ—Ç—Ä—ñ–±–Ω–æ—é –≤–∞–º —á–∞—Å—Ç–æ—Ç–æ—é –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–æ—Å—ñ–¥–∞–Ω–Ω—è –ø—Ä–æ–¥–∞–∂ ' +
        '(—Ä–∞–∑ –Ω–∞ –¥–æ–±—É, –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å, –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ).\n' +
        '\n' +
        '–ü—ñ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å —Å–∞–º–µ –∑–∞—Ä–∞–∑ —ñ –æ—Ç—Ä–∏–º—É–π—Ç–µ –±–æ–Ω—É—Å–Ω—ñ –∫–æ—à—Ç–∏ –Ω–∞ –±–∞–ª–∞–Ω—Å Coffeephone | Business'),
    },
    {
      showFullDescription: false,
      imgUrl: '/assets/img/landings/establishment-registration/posts/post-5.jpeg',
      title: marker('–í–∏–ø–∏—Ç–∏ –∫–∞–≤—É —Ä–∞–∑–æ–º –Ω–∞–≤—ñ—Ç—å, —è–∫—â–æ –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á—ñ –∑ —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ç, —Ç–µ–ø–µ—Ä –º–æ–∂–ª–∏–≤–æ!üòä\n'),
      description: marker(
        '–ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é CoffeePhone –º–æ–∂–Ω–∞ –ø–æ–¥–∞—Ä—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—ñ–∑–Ω–∏—Ö –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ñ–≤ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ü—ñ—é –≤ –∫–∞–≤\'—è—Ä–Ω—è—Ö.\n' +
        '\n' +
        '–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏ –ø—Ä–∏—î–º–Ω–æ —Å–≤–æ—î–º—É –¥—Ä—É–≥—É —ñ –Ω–µ –∑–Ω–∞—î—Ç–µ —è–∫? ü§î\n' +
        '–ü–æ–¥–∞—Ä—É–π—Ç–µ –π–æ–º—É –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∏.\n' +
        '\n' +
        '–ù—ñ—Ö—Ç–æ –Ω–µ –≤—ñ–¥–º–æ–≤–∏—Ç—å—Å—è –≤—ñ–¥ –∫—Ä—É–∂–µ—á–∫–∏ –∑–∞–ø–∞—à–Ω–æ—ó –∫–∞–≤–∏ –∑—Ä–∞–Ω–∫—É —Ç–∞ –∫—É—Å–æ—á–æ–∫ —Å–º–∞—á–Ω–æ–≥–æ —á–∏–∑–∫–µ–π–∫–∞' +
        ' –ø–æ–¥–∞—Ä–æ–≤–∞–Ω–æ–≥–æ –≤—ñ–¥ —Å–≤–æ–≥–æ –¥—Ä—É–≥–∞, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤—ñ–Ω –∑ —ñ–Ω—à–æ–≥–æ –º—ñ—Å—Ç–∞.\n' +
        '\n' +
        '–ë–µ–∑–ª—ñ—á –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π:\n' +
        '- –ó—Ä–æ–±—ñ—Ç—å –ø—Ä–∏—î–º–Ω–æ —Å–≤–æ—ó–π –¥—Ä—É–≥—ñ–π –ø–æ–ª–æ–≤–∏–Ω—Ü—ñ, —è–∫—â–æ –≤–æ–Ω–∞ –¥–∞–ª–µ–∫–æ –≤—ñ–¥ –≤–∞—Å.‚ù§Ô∏è\n' +
        '- –í–∏–Ω–Ω—ñ —Å–≤–æ—î–º—É –¥—Ä—É–≥—É –∫–∞–≤—É, –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∞—Ä—É–π—Ç–µ –π–æ–º—É –∞–±–æ–Ω–µ–º–µ–Ω—Ç –≤ –±—É–¥—å-—è–∫—ñ–π –∫–∞–≤\'—è—Ä–Ω—ñ.üòâ\n' +
        '- –ù–µ –º–∞—î—Ç–µ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –ø—Ä–∏–≥–æ—Å—Ç–∏—Ç–∏ –º–∞–º—É/–±–∞–±—É—Å—é —Å–º–∞—á–Ω–µ–Ω—å–∫–∏–º,' +
        ' –≤–∏–±–µ—Ä—ñ—Ç—å –∑–∞–∫–ª–∞–¥ —è–∫–∏–π —î –≤ —ó—Ö–Ω—å–æ–º—É –º—ñ—Å—Ç—ñ —Ç–∞ –ø–æ–¥–∞—Ä—É–π—Ç–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∏ –Ω–∞ –±—É–¥—å-—è–∫—É –ø—Ä–æ–¥—É–∫—Ü—ñ—é.üéâ\n' +
        '\n' +
        '–ó CoffeePhone –∫–∞–≤–æ–≤—ñ –º—Ä—ñ—ó —Å—Ç–∞—é—Ç—å —Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—é. –ü—ñ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –∑–∞—Ä–∞–∑ —ñ –æ—Ç—Ä–∏–º—É–π—Ç–µ –±–µ–∑–ª—ñ—á –Ω–æ–≤–∏—Ö –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–πüòç'),
    },
  ];
  SITE_URL = environment.SITE_URL;
  maxWordsForDescr: number = 150;
  constructor(
    private dialog: MatDialog,
    private title: Title,
    private meta: Meta,
    private translate: TranslateService,
    private languageService: LanguageService,
    private landingService: LandingService,
    private notifier: NotifierService,
    private pageMetaService: PageMetaService,
    @Inject(PLATFORM_ID) private platform: any,
  ) { }

  ngOnInit(): void {
    this.setCurrentLanguage();
    this.pageMetaService.initTags(SeoPageName.WelcomePartnersPage);
  }

  trimLongText(txt: string, showFullDescription: boolean) {
    return this.translate.instant(trimLongText(txt, this.maxWordsForDescr, showFullDescription));
  }

  showMore(index: number) {
    this.slides[index].showFullDescription = !this.slides[index].showFullDescription;
  }

  openRegistrationDialog() {
    this.dialog.open(ApplicationRegistrationDialogComponent);
  }

  setCurrentLanguage() {
    this.languageService.currentLanguage$
      .pipe(untilDestroyed(this))
      .subscribe((language) => {
        this.flagIconName = this.languages[language].flagIconName;
      });
  }

  isPwaApp(): boolean {
    if (isPlatformBrowser(this.platform)) {
      return (window.matchMedia('(display-mode: standalone)').matches)
        || ('standalone' in window.navigator)
        && (window.navigator['standalone'])
        || document.referrer.includes('android-app://');
    } else {
      return false;
    }
  }

  openLocalizationDialog() {
    this.dialog.open(LanguageDialogComponent);
  }

  sendMail() {
    if (this.form.valid) {
      this.sendMailSub = this.landingService.sendMail(this.form.value)
        .pipe(take(1), untilDestroyed(this))
        .subscribe(() => {
            this.notifier.notify('success', this.translate.instant(
              marker('–í–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –Ω–∞–¥—ñ—Å–ª–∞–Ω–µ. –û—á—ñ–∫—É–π—Ç–µ –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å'),
            ));
            this.form.reset();
          },
          (res) => {
            this.error = getBackendMessage(res.message);
          });
    }
  }
}
